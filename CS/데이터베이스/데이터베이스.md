# 데이터베이스

- [데이터베이스](#데이터베이스)
  - [데이터베이스의 탄생](#데이터베이스의-탄생)
  - [데이터베이스 시스템의 특징](#데이터베이스-시스템의-특징)
  - [DBMS의 3단계 구조](#dbms의-3단계-구조)
  - [트랜잭션](#트랜잭션)
  - [데이터베이스 관련 용어 정리](#데이터베이스-관련-용어-정리)
  - [데이터베이스 언어](#데이터베이스-언어)
  - [데이터 정의 언어(DDL) : Data Definition Language](#데이터-정의-언어ddl--data-definition-language)
  - [데이터 조작 언어(DML) : Data Manipulation Language](#데이터-조작-언어dml--data-manipulation-language)
  - [데이터베이스 시스템 아키텍처](#데이터베이스-시스템-아키텍처)
  - [데이터베이스 모델링](#데이터베이스-모델링)
    - [데이터베이스 모델링의 필요](#데이터베이스-모델링의-필요)
    - [모델링의 단계](#모델링의-단계)
    - [데이터 모델](#데이터-모델)
    - [개념적 데이터 모델링](#개념적-데이터-모델링)
    - [논리적 데이터 모델링](#논리적-데이터-모델링)
    - [물리적 데이터 모델링](#물리적-데이터-모델링)
    - [사용자 요구사항](#사용자-요구사항)
    - [사용자 요구사항의 필요](#사용자-요구사항의-필요)
    - [사용자 요구사항 분석의 개념](#사용자-요구사항-분석의-개념)
    - [사용자 요구사항 분석 과정](#사용자-요구사항-분석-과정)
  - [ER 모델](#er-모델)
    - [개체 집합](#개체-집합)
    - [관계 집합](#관계-집합)
    - [속성](#속성)
    - [속성의 종류](#속성의-종류)
  - [제약조건](#제약조건)
    - [사상수(mapping cardinality)](#사상수mapping-cardinality)
    - [참가 제약조건(participation constraints)](#참가-제약조건participation-constraints)
    - [키(key) 속성](#키key-속성)
    - [특수 속성과 특수 관계](#특수-속성과-특수-관계)

## 데이터베이스의 탄생

과거에 데이터를 관리하는 방식으로 사용하던 파일 처리 시스템은 다음과 같은 문제가 있었다.
이를 해결하기 위해 데이터베이스가 탄생했다.

- 데이터 종속의 문제
  - 물리적 데이터 종속 : 저장된 데이터가 특정 H/W에서 또는 사용자 및 S/W만 사용될 수 있도록 제한된 문제
  - -> 신규 디스크 확장이 어렵다
  - 논리적 데이터 종속 : 데이터의 논리적 구조가 조금만 바뀌더라도 애플리케이션을 수정해야하고, 배포하는데 비용이 듬.
- 데이터 중복의 문제
  - 동일한 사항에 대한 중복 데이터는 일관성, 보안성, 경제성 측면에서 문제 발생
  - 파일 시스템은 연결 정보가 포함되지 않기 때문에 데이터의 중복이 생길 수 있다.
    - 일관성 : 한 사실에 대해 한 개의 데이터 값을 유지
    - 보안성 : 같은 데이터에 같은 수준의 보안 유지
    - 경제성 : 데이터에 대해 최소한의 저장 공간 만을 점유
- 무결성 훼손의 문제
  - 실세계의 데이터는 데이터가 가능 범위(제약조건)를 포함
  - 하지만 파일처리시스템에서는 이러한 제약조건이 없기 때문에
  - 데이터 무결성이 훼손될 수 있다.
- 동시 접근의 문제
  - 동일 데이터에 다수 사용자의 접근 허용시 일관성과 데이터의 무결성이 훼손될 수 있다.

데이터베이스가 나오면서 기존 애플리케이션은 직접 디스크에 접근하는 게 아니라 데이터베이스에 접근해서 데이터를 저장, 조회한다.

## 데이터베이스 시스템의 특징

- 데이베이스 시스템의 자기 기술성
  - 데이터와 데이터의 정의 및 설명(메타데이터)을 포함
- 프로그램과 데이터의 격리 및 추상화
  - 사용자에게 데이터에 대한 개념적인 표현을 재공하여 접근성을 향상
- 다중 뷰 제공
  - 각 사용자가 관심을 같는 데이터베이스의 일부만을 표현할 수 있는 기능 제공
- 데이터 공유와 다수 사용자 트랜잭션 처리
  - 다수의 데이터 조작 요청을 동시성 제어 기능을 통해 데이터의 일관성을 보장하면서 작업을 수행

## DBMS의 3단계 구조

![./데이터베이스/DBMS-3-layer.png](./데이터베이스/DBMS-3-layer.png)

DBMS는 프로그램과 데이터를 격리시켜 추상화하고, 다중 뷰를 제공하기 위해서 위와같은 3단계 구조로 만들어진다.

- 내부 단계 : 물리적인 표현(어떤 데이터가 어떤 디스크에 어떤 용량으로 저장되어있는지)
- 개념 단계 : 전체적인 데이터의 규모 또는 구조(데이터에 대한 설명)
- 외부 단계 : 실제 사용자가 데이터를 보게되는 뷰(일반 사용자는 외부 단계만 이용가능)

## 트랜잭션

- 하나의 논리적 작업을 처리하기 위한 일련의 데이터베이스 명령의 집합
- 데이터에 동시 접근 시 발생하는 일관성과 데이터의 무결성의 훼손을 막기 위해
- 해당 데이터에 접근하는 사용자가 있다면 잠금(lock)을 이용해 접근을 막음

## 데이터베이스 관련 용어 정리

- 데이터(data) : 어떠한 사실에 대한 정량적, 정성적 특징을 나타낼 수 있는 값과 값에 대한 설명
- 데이터베이스(database) : 특정 기관의 애플리케이션 시스템에서 사용되는 데이터의 집합
- 데이터베이스 관리 시스템(DBMS) : 데이터베이스에 저장된 데이터의 구성, 저장, 관리, 사용을 위한 소프트웨어 패키지
- 데이터베이스 시스템(database system) : 정보를 데이터베이스에 저장, 관리하여 사용자에게 요구된 형태의 정보로 제공하는 컴퓨터 기반 시스템

## 데이터베이스 언어

- DBMS는 사용자가 데이터베이스를 쉽게 사용하고 다룰 수 있도록 언어 형태의 인터패이스를 제공
- 역할에 따라 다음과 같은 종류의 언어로 구분됨
  - 데이터 정의 언어(DDL)
  - 데이터 조작 언어(DML)
- 현대 데이터베이스 언어는 자연어와 유사한 형태의 SQL로 표준화

## 데이터 정의 언어(DDL) : Data Definition Language

- 데이터베이스 객체를 생성, 수정, 삭제하기 위한 언어
- DDL의 요구 기능
  - 데이터 모델에 따라 애플리케이션 프로그램이 요구하는 데이터의 논리적 구성이나 특징을 규정
  - 데이터가 기억장치에 저장되도록 데이터의 물리적 구성을 규정
  - 물리적 구성을 논리적 구성으로 변환이 가능하도록 데이터의 물리적 구성과 논리적 구성 간의 사상을 규정

## 데이터 조작 언어(DML) : Data Manipulation Language

- 구조화된 데이터에 사용자가 접근 및 조작할 수 있도록 지원하는 언어(검색, 삽입, 삭제, 수정)
- DML의 요구 조건
  - 데이터 조작이 쉽고 간편
  - 데이터 조작 기능이 정확하고 완전
  - 사용자의 요청을 시스템 내부에서 효율적으로 처리 가능

## 데이터베이스 시스템 아키텍처

1. 중앙집중식 방식
   - 단일 서버가 다수의 클라이언트 장치를 대신하여 작동
   - 중앙 컴퓨터의 과부하로 전체적인 성능 저하
2. 분산 시스템 방식
   - 클라이언트 장치의 성능 향상으로 자체적인 처리 능력 보유
   - 클라이언트-서버 데이터베이스 시스템
      - 애플리케이션 프로긂의 부하를 분산
      - 소프트웨어의 유자보수 비용을 절감 및 이식성 증가

## 데이터베이스 모델링

- 데이터의 의미를 파악하고 데이터와 관여하는 업무 프로세스를 개념적으로 정의하고 분석하는 작업

### 데이터베이스 모델링의 필요

- 비즈니스적 관점
  - 어떤 데이터를 저장해야 하는가?
- 컴퓨터 프로그래머 관점
  - 어떻게 데이터를 저장해야 하는가?

### 모델링의 단계

모델링의 단계는 다음과 같다

1. 사용자 요구사항 분석
2. 개념적 데이터 모델링 (데이터 및 업무)
3. 논리적 데이터 모델링 (ER 모델)
4. 물리적 데이터 모델링 (관계형 모델)
5. 내부 스키마 (물리적 세부사항)

### 데이터 모델

- 사용할 데이터를 선별하여 데이터베이스에 체계적으로 구조화하여 저장, 사용할 방법이 필요
- `데이터 모델` : 의미, 데이터 타입, 연산 등을 명시하기 위해 사용할 수 있는 개념들의 집합
- `데이터 모델링` : 실세계의 일부분을 DBMS가 지원하는 데이터 모델의 형태로 나타내는 과정

### 개념적 데이터 모델링

- 요구사항의 해석 오류를 방지
- 실세계의 데이터를 개념적으로 일반화시켜 데이터 구조, 데이터 타입, 속성, 관계, 제약조건 등을 이끌어내는 과정

### 논리적 데이터 모델링

- 특정 DBMS의 구현 모델에 맞춰 데이터를 표현하는 과정
- 데이터 정의 언어로 기술된 개념 스키마 생성

### 물리적 데이터 모델링

- 데이터베이스 파일의 내부 저장구조, 파일 구성, 인덱스, 접근 경로 등을 결정하는 과정

### 사용자 요구사항

### 사용자 요구사항의 필요

- 데이터에 대한 충분한 사전 분석없이 적절한 설계가 불가능
  - 데이터베이스의 구조가 점차 복잡해지고 수명 주기가 단축되고 때문에 신속, 정확성이 요구
  - 데이터베이스의 활용 범위가 확대됨에 데이터베이스의 효율적 운용에 초점
- 사용자의 요구를 명세하지 않고 데이터베이스 설계 및 개발을 진행하는 경우
  - 결과물의 `완성도 저하 및 신뢰도 추락`
  - 개발 후, 발생하는 에러 수정에 많은 `추가 비용 지출`

### 사용자 요구사항 분석의 개념

- 시스템의 대상이 되는 업무를 분석
  - 정보 시스템의 데이터베이스가 신속하고 효과적으로 업무 처리를 지원
  - 필요한 데이터를 저장 및 운용할 수 있는 구조 개발
- 도출, 분석, 기록 단게로 수행

### 사용자 요구사항 분석 과정

- 제안 요청서 -> 요구사항 도출
  - 구축대상, 프로젝트 목표, 범위를 기준으로 조사범위를 결정
  - 업무관계자 인터뷰
  - 외부자료 수집 및 분석
- 요구사항 명세서 -> 요구사항 분석
  - 도출된 요구사항의 명확성, 완전성, 모호성 검증
  - 불완전한 부분이 존재할 경우 요구사항 도출단계 재수행
  - 요구사항을 분류하여 통합 또는 분리
- 요구사항 정의서 -> 요구사항 기록
  - 요구사항 목록 정리 및 관리자의 승인
  - 정리된 요구사항을 형식에 맞춰 문서화

## ER 모델

- ER 모델은 개념적 모델링 과정에서 사용된다
- 실세계의 속성들로 이루어진 개체(entity)와 개체 사이의 관계(relationship)를 정형화시킨 모델
- 개념적 모델링 단계에서 사용되는 데이터 모델
- 데이터 구조와 관계를 ER 다이어그램(ERD)으로 표현
- 구성요소
  - 개체 집합
  - 관계 집합
  - 속성

### 개체 집합

- 개체(entity)
  - 실세계에 존재하는 다른 객체와 구별되는 유무형의 사물
  - 개체를 설명하는 여러 속성들로 구성
  - ex) 학생개체 (20192635, 김한수, 남, 20)
- 개체 집합(entity set)
  - 같은 속성을 공유하는 개체들의 모임
  - ex) 학생개체집합 (학생 개체는 다음과 같은 속성을 보유 : 학번, 이름, 성별, 나이)

### 관계 집합

- 관계
  - 개체와 개체 사이의 연관성
  - ex) 전공 관게 집합 : 학생번호가 20192635인 `학생`의 `전공`은 컴퓨터공학과이다
- 관계 집합
  - 개체 집합 간의 연결 관계
  - 마름모를 이용해 표현

### 속성

- 개체를 구체적으로 설명
- 속성에 포함될 수 있는 값의 특성에 따라 여러 종류로 구분
- 속성의 종류
  - 단순 속성과 복합 속성
  - 단일값 속성과 다중갑 속성
  - 유도 속성과 저장 속성

### 속성의 종류

- 단순 속성
  - 더 작은 구성요소로 나눌 수 없는 속성
  - ex) 성별, 나이 등
  - 학생이름, 생년월일은 더 작은 구성요소(성, 이름, 년, 월, 일)로 나눌 수 있으므로 단순 속성이 아니라고 볼 수 있음
- 복합 속성
  - 더 작은 구성요소로 나눌 수 있는 속성
  - 하위 속성은 들여쓰기로 표현
- 단일값 속성
  - 한 개체에 대해 단 하나의 값만을 갖는 속성
  - 전화번호는 여러 번호를 가질 수 있음(다중값 속성)
- 다중값 속성
  - 한 개체에 대해 여러 개의 값을 갖는 속성
  - {전화번호}처럼 중괄호를 이용해 표현
- 유도 속성
  - 다른 속성의 값으로 값이 유추될 수 있는 속성(실제 저장하지 않아도 됨)
  - ex) 나이는 생년월일을 기반으로 유추할 수 있음
  - 나이()로 표현
- 저장 속성
  - 유도 속성을 위해 사용될 수 있는 속성(실제 저장해야함)

## 제약조건

- 데이터 모델은 데이터, 의미, 구조, 연관성 및 데이터의 조건을 표현하기 위한 도구
- ER 모델은 개체와 관계에 대한 표현의 정확성을 위해 데이터가 준수해야 하는 제약조건을 정의할 수 있는 표현 방법을 제공
- 제약조건(constraints)의 종류
  - 사상수
  - 참가 제약조건
  - 키 속성

### 사상수(mapping cardinality)

- 관계 집합에 참가한 개체 집합에 대해 한 개체가 다른 개체와 관계를 맺을 수 있는 수량을 명시
- ex) 일대일(1 : 1), 일대다(1 : N), 다대다(N : M)
- 다수는 직선 단수는 화살표로 표현

### 참가 제약조건(participation constraints)

- 전체적 참가 : 어떤 개체 집합의 모든 개체가 관계 집합에 참여하는 조건
- 부분적 참가 : 어떤 개체 집합의 일부 개체가 관계 집합에 참여하는 조건
- '어떤 학생은 하나 이상의 수강을 할 수 있다'와 같은 제약조건을 표현

### 키(key) 속성

- 각 개체를 구별하는데 사용되는 유일한 값을 가지는 속성의 집합
  - 개체를 고유하게 구분하는 역할
  - 관계 집합의 특정 관계를 찾는 역할
- 밑줄로 표현

### 특수 속성과 특수 관계

- `관계 집합의 속성` : 두 개체 집합의 관계에서 생성되는 값을 저장하는 속성
- `재귀적 관계` : 한 개체 집합이 자기 자신과 관계 집합을 형성하는 관계
- `약한 개체 집합`
  - 개체의 존재 유무가 관계를 맺고 있는 개체의 존재에 종속되는 개체 집합
- `강한 개체 집합`
  - 약한 개체 집합과 연결되는 일반 개체 집합
  - 관계 집합을 이중선으로 표시함