- [개요](#개요)
  - [스케일 업](#스케일-업)
  - [스케일 아웃](#스케일-아웃)
  - [블루 그린 배포](#블루-그린-배포)
  - [읽기요청 부하 분산](#읽기요청-부하-분산)
    - [클러스터링과 레플리카](#클러스터링과-레플리카)
    - [샤딩](#샤딩)
- [쓰기 요청 분산](#쓰기-요청-분산)

# 개요
웹서비스 확장 전략

## 스케일 업

- 한 대의 컴퓨터의 성능을 좋게 하는 것

## 스케일 아웃

- 로드밸런싱과 여러 대의 컴퓨터를 사용해서 트래픽, 장애 대응

## 블루 그린 배포

- 로드밸런싱과 로드밸런서의 **헬스체크**(서버의 활성화 여부를 체크하고 요청 분배 선택)를 이용해서 서버를 하나씩 재배포하는 방식
- 이전 버전을 블루 환경, 새 버전을 그린 환경이라고 부른다.
- 사용자 입장에게는 서버가 종료되지 않는 듯한 경험을 제공한다.

## 읽기요청 부하 분산

- **단일 서버**라면 동일한 읽기요청에서 **내부 캐시**를 이용해서 DB로 가는 요청의 빈도를 줄여서 DB로 가는 부하를 줄여서 비교적 안정적인 서비스를 할 수 있다.
- **여러 서버**라면 동시성을 보장하기 위해서 **캐시 서버**를 별도로 두어야 한다.


### 클러스터링과 레플리카

- 클러스터링(군집화)
  - Master node 혹은 Network node(데이터를 가지고 있진 않지만, 데이터를 가지고 있는 서버들에 대한 정보를 알고 있는 서버)를 두고 하위에 여러 DB SERVER를 둬서 요청을 분산하고, 몇 개의 서버가 죽더라도 안정성을 확보할 수 있다.

- 레플리카 
  - 데이터를 복제한 서버를 여러개 둔다. 어떤 서버는 읽기용, 질의용 등으로 나눌 수 있다.

### 샤딩
- 같은 테이블 스키마를 가진 데이터를 다수의 데이터베이스에 분산하여 저장하는 기법
- 로직 구성, 운영적인면에서 복잡도가 높아질 수 있다.
- 가능하면 샤딩을 피하거나 지연시킬 수 있는 방법을 찾는 것이 우선시되어야함.
- LINE Engineering Sharding 사례
  - https://engineering.linecorp.com/ko/blog/line-manga-database/ 




# 쓰기 요청 분산

역할에 맞게 server를 분리한다. ex) 파일 업로드 server , 글 조회 server 